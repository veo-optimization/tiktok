#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –Ω–∞ GitHub Pages
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: ./deploy.sh "–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–º—ñ—Ç—É"

echo "üöÄ –ü–æ—á–∞—Ç–æ–∫ –ø—Ä–æ—Ü–µ—Å—É –¥–µ–ø–ª–æ—é..."

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —î –∑–º—ñ–Ω–∏ –¥–ª—è –∫–æ–º—ñ—Ç—É
if [[ -z $(git status --porcelain) ]]; then
    echo "‚ùå –ù–µ–º–∞—î –∑–º—ñ–Ω –¥–ª—è –∫–æ–º—ñ—Ç—É"
    exit 1
fi

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤
echo "üìÅ –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤..."
git add .

# –ö–æ–º—ñ—Ç –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
COMMIT_MESSAGE=${1:-"Update website"}
echo "üíæ –ö–æ–º—ñ—Ç –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: $COMMIT_MESSAGE"
git commit -m "$COMMIT_MESSAGE"

# –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞ GitHub
echo "üì§ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞ GitHub..."
git push origin main

echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "üåê –°–∞–π—Ç –±—É–¥–µ –æ–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ 1-2 —Ö–≤–∏–ª–∏–Ω–∏"
echo "üìã –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å —É GitHub Actions"
